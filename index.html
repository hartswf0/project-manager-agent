<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Management Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f4f8;
            color: #333;
            line-height: 1.6;
            font-size: 16px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .container {
            max-width: 1000px;
            margin: auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            flex-grow: 1;
        }
        h1, h2 {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        h1 {
            font-size: 32px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            font-size: 24px;
            background-color: #ecf0f1;
            padding: 10px 20px;
            border-radius: 5px;
            margin-top: 20px;
        }
        #chat-container {
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            margin-bottom: 20px;
            padding: 10px;
        }
        #chat-messages {
            height: 400px;
            overflow-y: auto;
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        #user-input {
            display: flex;
            margin-bottom: 10px;
        }
        #message-input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            font-size: 16px;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            margin-left: 10px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        #api-key-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            font-size: 16px;
        }
        .about {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .about a {
            color: #3498db;
            text-decoration: none;
        }
        .about a:hover {
            text-decoration: underline;
        }
        #console-output {
            background-color: #2c3e50;
            color: #ecf0f1;
            border: 1px solid #34495e;
            padding: 15px;
            margin-top: 20px;
            font-family: 'Courier New', Courier, monospace;
            white-space: pre-wrap;
            border-radius: 5px;
        }
        #project-phases {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .phase {
            background-color: #ecf0f1;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .phase:hover, .phase.active {
            background-color: #3498db;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Project Management Assistant</h1>
        <input type="password" id="api-key-input" placeholder="Enter your OpenAI API key">
        <button id="test-api-key">Test API Key</button>
        <div id="project-phases">
            <div class="phase" data-phase="brainstorm">Brainstorm</div>
            <div class="phase" data-phase="architecture">Architecture</div>
            <div class="phase" data-phase="prototype">Prototype</div>
            <div class="phase" data-phase="development">Development</div>
            <div class="phase" data-phase="testing">Testing</div>
        </div>
        <div id="chat-container">
            <div id="chat-messages"></div>
            <div id="user-input">
                <input type="text" id="message-input" placeholder="Type your message...">
                <button id="send-button">Send</button>
            </div>
        </div>
        <div id="console-output"></div>
        <div class="about">
            <h2>About This Project Management Assistant</h2>
            <p>This AI-powered assistant helps developer teams plan, organize, and execute their technical projects efficiently. It provides guidance on:</p>
            <ul>
                <li>Project planning and task allocation</li>
                <li>Technical implementation (HTML, CSS, JavaScript, APIs)</li>
                <li>Best practices in web development and accessibility</li>
                <li>Problem-solving and alternative solutions</li>
            </ul>
            <p>Select a project phase above to get targeted advice and support for your team's current needs.</p>
        </div>
    </div>

    <script>
        const chatMessages = document.getElementById('chat-messages');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const apiKeyInput = document.getElementById('api-key-input');
        const testApiKeyButton = document.getElementById('test-api-key');
        const consoleOutput = document.getElementById('console-output');
        const projectPhases = document.getElementById('project-phases');

        let currentPhase = '';

        sendButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
        testApiKeyButton.addEventListener('click', testApiKey);

        projectPhases.addEventListener('click', (e) => {
            if (e.target.classList.contains('phase')) {
                setActivePhase(e.target.dataset.phase);
            }
        });

        function setActivePhase(phase) {
            currentPhase = phase;
            document.querySelectorAll('.phase').forEach(el => el.classList.remove('active'));
            document.querySelector(`[data-phase="${phase}"]`).classList.add('active');
            addMessageToChat('System', `Switched to ${phase} phase. How can I assist you with this phase of your project?`);
        }

        function log(message) {
            console.log(message);
            consoleOutput.textContent += message + '\n';
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        async function testApiKey() {
            const apiKey = apiKeyInput.value.trim();
            if (!apiKey) {
                log('Please enter an API key.');
                return;
            }

            log('Testing API key...');
            try {
                const response = await fetch('https://api.openai.com/v1/engines', {
                    headers: {
                        'Authorization': `Bearer ${apiKey}`
                    }
                });

                if (response.ok) {
                    log('API key is valid!');
                } else {
                    log('API key is invalid. Please check and try again.');
                }
            } catch (error) {
                log(`Error testing API key: ${error.message}`);
            }
        }

        async function sendMessage() {
            const message = messageInput.value.trim();
            const apiKey = apiKeyInput.value.trim();

            if (!message) return;
            if (!apiKey) {
                log('Please enter an API key before sending a message.');
                return;
            }

            addMessageToChat('User', message);
            messageInput.value = '';

            log('Sending message to OpenAI API...');
            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: "gpt-3.5-turbo",
                        messages: [
                            {role: "system", content: getSystemPrompt()},
                            {role: "user", content: message}
                        ],
                        max_tokens: 300
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                const aiResponse = data.choices[0].message.content.trim();
                log('Received response from OpenAI API');
                addMessageToChat('Assistant', aiResponse);
            } catch (error) {
                log(`Error: ${error.message}`);
                addMessageToChat('Assistant', 'Sorry, there was an error processing your request.');
            }
        }

        function addMessageToChat(sender, message) {
            const messageElement = document.createElement('div');
            messageElement.innerHTML = `<strong>${sender}:</strong> ${message}`;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function getSystemPrompt() {
            const basePrompt = `You are an AI assistant specialized in guiding teams through the process of developing technical projects. Your primary mission is to help teams plan, organize, and execute their development projects effectively. You have expertise in project management, web development, API integration, and various programming languages. Provide clear, concise, and actionable advice tailored to the team's current project phase and specific needs. Break down complex tasks into manageable steps and encourage best practices in coding, project management, and accessibility throughout the development process.`;
            
            let phaseSpecificPrompt = '';
            switch(currentPhase) {
                case 'brainstorm':
                    phaseSpecificPrompt = `Focus on helping the team define clear objectives, identify target audience and use cases, and prioritize features. Encourage consideration of accessibility from the start.`;
                    break;
                case 'architecture':
                    phaseSpecificPrompt = `Assist in evaluating technology stack choices, API needs, and architectural decisions. Emphasize scalability, maintainability, and the implications of different choices.`;
                    break;
                case 'prototype':
                    phaseSpecificPrompt = `Guide the team on rapid prototyping techniques, setting up basic project structure, and integrating core APIs or services. Suggest ways to gather and incorporate early feedback.`;
                    break;
                case 'development':
                    phaseSpecificPrompt = `Provide specific advice on development best practices, code organization, and implementation of features. Offer guidance on API integration, accessibility implementation, and error handling.`;
                    break;
                case 'testing':
                    phaseSpecificPrompt = `Suggest comprehensive testing strategies, including unit tests, integration tests, and user acceptance testing. Guide the team on gathering and prioritizing user feedback, and optimizing performance and user experience.`;
                    break;
                default:
                    phaseSpecificPrompt = `Provide general guidance on project management and development best practices.`;
            }

            return basePrompt + ' ' + phaseSpecificPrompt;
        }
    </script>
</body>
</html>